\chapter{R-\/\+Type Mirror — Global Technical Documentation}
\hypertarget{index}{}\label{index}\index{R-\/Type Mirror — Global Technical Documentation@{R-\/Type Mirror — Global Technical Documentation}}
\hypertarget{index_autotoc_md0}{}\doxysection{\texorpdfstring{R-\/\+Type Mirror}{R-Type Mirror}}\label{index_autotoc_md0}
{\bfseries{R-\/\+Type Mirror}} is a multiplayer shoot’em up inspired by {\itshape R-\/\+Type}, developed as an {\bfseries{Epitech 2025}} project. It features a custom {\bfseries{Entity Component System (\doxylink{classECS}{ECS})}} game engine on the client side and a {\bfseries{\doxylink{classUDP}{UDP}}} networking architecture for real-\/time multiplayer gameplay.

This documentation is the {\bfseries{single entry point}} for the whole project\+: game engine, client systems, network module, and protocol specification.

\DoxyHorRuler{0}
\hypertarget{index_autotoc_md2}{}\doxysubsection{\texorpdfstring{1. Architectural Decisions (\+POC)}{1. Architectural Decisions (POC)}}\label{index_autotoc_md2}
The project architecture is based on a detailed Proof of Concept (POC) comparing various technologies. For more details, see the \doxysectlink{md_poc}{POC document}{0}.\hypertarget{index_autotoc_md3}{}\doxysubsubsection{\texorpdfstring{Why SFML?}{Why SFML?}}\label{index_autotoc_md3}
We selected {\bfseries{SFML (Simple and Fast Multimedia Library)}} over alternatives like SDL2, Raylib, or Qt for the following reasons\+:
\begin{DoxyItemize}
\item {\bfseries{Unified Stack\+:}} SFML handles Graphics, Audio, and Networking in a single C++ library, reducing dependencies.
\item {\bfseries{Modern C++\+:}} It supports RAII and C++20 features natively, unlike C-\/based libraries (SDL2, Raylib).
\item {\bfseries{Architecture Fit\+:}} Its Object-\/\+Oriented design aligns perfectly with our \doxylink{classECS}{ECS} architecture.
\item {\bfseries{Protocol Safety\+:}} {\ttfamily sf\+::\+Packet} handles Endianness automatically for cross-\/platform networking.
\end{DoxyItemize}\hypertarget{index_autotoc_md4}{}\doxysubsubsection{\texorpdfstring{ECS vs. OOP}{ECS vs. OOP}}\label{index_autotoc_md4}
We chose an {\bfseries{Entity Component System (\doxylink{classECS}{ECS})}} over traditional Object-\/\+Oriented Programming (OOP) to solve the "{}\+Diamond of Death"{} inheritance problem and improve performance through data locality.
\begin{DoxyItemize}
\item {\bfseries{Composition over Inheritance\+:}} Entities are built by composing data components, not by deep inheritance trees.
\item {\bfseries{Performance\+:}} \doxylink{namespaceComponents}{Components} are stored in contiguous arrays ({\ttfamily std\+::vector}), maximizing CPU cache efficiency.
\end{DoxyItemize}

\DoxyHorRuler{0}
\hypertarget{index_autotoc_md6}{}\doxysubsection{\texorpdfstring{2. Game Engine (\+ECS)}{2. Game Engine (ECS)}}\label{index_autotoc_md6}
The game engine is a custom lightweight \doxylink{classECS}{ECS} implementation.\hypertarget{index_autotoc_md7}{}\doxysubsubsection{\texorpdfstring{Core Concepts}{Core Concepts}}\label{index_autotoc_md7}

\begin{DoxyItemize}
\item {\bfseries{Entity\+:}} A simple unique ID ({\ttfamily uint32\+\_\+t}).
\item {\bfseries{Component\+:}} Pure data structs (POD) with no logic (e.\+g., {\ttfamily Position}, {\ttfamily Velocity}, {\ttfamily Health}).
\item {\bfseries{System\+:}} Pure logic that iterates over entities with specific component signatures (e.\+g., {\ttfamily \doxylink{classMovementSystem}{Movement\+System}}, {\ttfamily \doxylink{classRenderSystem}{Render\+System}}).
\end{DoxyItemize}\hypertarget{index_autotoc_md8}{}\doxysubsubsection{\texorpdfstring{Key Characteristics}{Key Characteristics}}\label{index_autotoc_md8}

\begin{DoxyItemize}
\item {\bfseries{Max Entities\+:}} 2048
\item {\bfseries{Max Component Types\+:}} 128
\item {\bfseries{Signatures\+:}} {\ttfamily std\+::bitset} used for \$\+O(1)\$ component checks.
\end{DoxyItemize}\hypertarget{index_autotoc_md9}{}\doxysubsubsection{\texorpdfstring{Systems Overview}{Systems Overview}}\label{index_autotoc_md9}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ System   }&\cellcolor{\tableheadbgcolor}\textbf{ Responsibility    }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ System   }&\cellcolor{\tableheadbgcolor}\textbf{ Responsibility    }\\\cline{1-2}
\endhead
{\ttfamily \doxylink{classInputSystem}{Input\+System}}   &Captures player inputs and sends them to the server.    \\\cline{1-2}
{\ttfamily \doxylink{classMovementSystem}{Movement\+System}}   &Updates positions based on velocity and patterns.    \\\cline{1-2}
{\ttfamily \doxylink{classCollisionSystem}{Collision\+System}}   &Handles AABB collisions between projectiles, enemies, and players.    \\\cline{1-2}
{\ttfamily \doxylink{classWaveSystem}{Wave\+System}}   &Manages enemy spawning patterns.    \\\cline{1-2}
{\ttfamily \doxylink{classRenderSystem}{Render\+System}}   &Draws entities using SFML.   \\\cline{1-2}
\end{longtabu}


 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{class_graph.png}
\doxyfigcaption{Hiérarchie des classes -\/ Graphe détaillé}
\end{DoxyImage}
   

\DoxyHorRuler{0}
\hypertarget{index_autotoc_md11}{}\doxysubsection{\texorpdfstring{3. Network Architecture}{3. Network Architecture}}\label{index_autotoc_md11}
The project uses a {\bfseries{\doxylink{classUDP}{UDP}}} architecture to balance reliability and latency.\hypertarget{index_autotoc_md12}{}\doxysubsubsection{\texorpdfstring{UDP (\+Gameplay Channel) -\/ Port 53000}{UDP (Gameplay Channel) - Port 53000}}\label{index_autotoc_md12}

\begin{DoxyItemize}
\item {\bfseries{Role\+:}} Real-\/time high-\/frequency data transfer.
\item {\bfseries{Functions\+:}} Player inputs (\doxylink{classClient}{Client} -\/\texorpdfstring{$>$}{>} \doxylink{classServer}{Server}) and Entity snapshots (\doxylink{classServer}{Server} -\/\texorpdfstring{$>$}{>} \doxylink{classClient}{Client}).
\item {\bfseries{Reliability\+:}} Packet loss is accepted. Newer packets replace older ones (60Hz update rate).
\end{DoxyItemize}

 
\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{network_graph.png}
\doxyfigcaption{Network Architecture Graph}
\end{DoxyImage}
   

\DoxyHorRuler{0}
\hypertarget{index_autotoc_md14}{}\doxysubsection{\texorpdfstring{4. Network Protocol (\+RFC)}{4. Network Protocol (RFC)}}\label{index_autotoc_md14}
The communication follows a strict protocol defined in \href{rfcprotocol.txt}{\texttt{ RFC Protocol}}. \hypertarget{index_autotoc_md15}{}\doxysubsubsection{\texorpdfstring{Client -\/$>$ Server\+: $<$tt$>$\+Input\+State$<$/tt$>$}{Client -> Server: <tt>InputState</tt>}}\label{index_autotoc_md15}
Sent every frame to update the player\textquotesingle{}s intent.
\begin{DoxyItemize}
\item {\bfseries{Size\+:}} 3 Bytes
\item {\bfseries{Structure\+:}} {\ttfamily \mbox{[}Player\+ID (1B)\mbox{]} \mbox{[}Input Bitmask (1B)\mbox{]} \mbox{[}Padding/\+Seq (1B)\mbox{]}}
\item {\bfseries{Inputs\+:}} Up, Down, Left, Right, Shoot.
\end{DoxyItemize}\hypertarget{index_autotoc_md16}{}\doxysubsubsection{\texorpdfstring{Server -\/$>$ Client\+: $<$tt$>$\+Entity\+Update$<$/tt$>$}{Server -> Client: <tt>EntityUpdate</tt>}}\label{index_autotoc_md16}
Broadcasted to all clients to synchronize the game state.
\begin{DoxyItemize}
\item {\bfseries{Size\+:}} Packed Struct (\texorpdfstring{$\sim$}{\string~}22 Bytes)
\item {\bfseries{Structure\+:}} {\ttfamily \mbox{[}Entity\+ID\mbox{]} \mbox{[}Type\mbox{]} \mbox{[}Position X\mbox{]} \mbox{[}Position Y\mbox{]} \mbox{[}Health\mbox{]} \mbox{[}State\mbox{]}}
\item {\bfseries{Magic Values\+:}} Special IDs are used to denote events (e.\+g., {\ttfamily 0x\+FFFE} for Entity Death).
\end{DoxyItemize}\hypertarget{index_autotoc_md17}{}\doxysubsubsection{\texorpdfstring{Security \& Integrity}{Security \& Integrity}}\label{index_autotoc_md17}

\begin{DoxyItemize}
\item {\bfseries{Source Validation\+:}} The server validates the sender\textquotesingle{}s IP/\+Port against the registered \doxylink{classClient}{Client} ID.
\item {\bfseries{Sequence Numbers\+:}} Used to discard out-\/of-\/order or replayed packets.
\item {\bfseries{\doxylink{classServer}{Server} Authority\+:}} The server is the single source of truth for positions and collisions; clients only send inputs.
\end{DoxyItemize}

\DoxyHorRuler{0}
\hypertarget{index_autotoc_md19}{}\doxysubsection{\texorpdfstring{5. Project Structure}{5. Project Structure}}\label{index_autotoc_md19}

\begin{DoxyItemize}
\item {\ttfamily include/} -\/ Header files (\doxylink{classECS}{ECS}, Systems, Network).
\item {\ttfamily src/client/} -\/ Client-\/specific logic (Main loop, Input handling).
\item {\ttfamily src/server/} -\/ Server-\/specific logic (Game loop, Broadcast).
\item {\ttfamily src/engine/} -\/ Core \doxylink{classECS}{ECS} implementation.
\end{DoxyItemize}

\DoxyHorRuler{0}
\hypertarget{index_autotoc_md21}{}\doxysubsection{\texorpdfstring{Authors}{Authors}}\label{index_autotoc_md21}
{\bfseries{Epitech 2025 – R-\/\+Type Mirror}}
\begin{DoxyItemize}
\item Gabriel Villemonte
\item Clément Chellier
\item Mathis Coutaye
\item Lucas Hoareau 
\end{DoxyItemize}